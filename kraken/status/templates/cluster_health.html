{% extends 'base.html' %}
{% block cluster_health_title %}<h1>Cluster Health</h1>{% endblock %}
{% block disk_free %}
{% comment %} {{ cluster_health.output.health.health_services.0.mons.0.kb_avail }} {% endcomment %}
{% endblock %}


{% block cluster_health %} {% comment %} {{ cluster_health }} {% endcomment %}
<script>
// used and free KB
$(document).ready(function(){
  var disk_avail = {{ disk_free.output.stats.total_avail }} / 1024;
  var disk_used = {{ disk_free.output.stats.total_used }} / 1024;
  var small_avail = disk_avail.toFixed(2);
  var small_used = disk_used.toFixed(2);
  
  var data = [
    ['MB Available: ' +  small_avail, disk_avail],
    ['MB Used: ' +  small_used, disk_used]
  ];
  var plot1 = jQuery.jqplot ('chart1', [data],
    {
      seriesDefaults: {
        // Make this a pie chart.
        renderer: jQuery.jqplot.PieRenderer,
        rendererOptions: {
          // Put data labels on the pie slices.
          // By default, labels show the percentage of the slice.
          showDataLabels: true
        }
      },
      legend: { show:true, location: 'e' }
    }
  );
});
</script>
{% endblock %}


{% block osd_stat %}
<h3>OSD Status: {{ osd_stat.status }}</h3>
<center>
<table border="1">
<tr>
<td>OSD Total</td>
<td>OSD Up</td>
<td>OSD In</td>
</tr>
<tr>
<td>{{ osd_stat.output.num_osds }}</td>
<td>{{ osd_stat.output.num_up_osds }}</td>
<td>{{ osd_stat.output.num_in_osds }}</td>
</tr>
</table>
</center>
{% endblock %}


{% block pool_list %}
<center>
<h3>Pool List</h3>
<table border="1">
<tr>
<td>ID</td>
<td>Pool Name</td>
<td>Size</td>
</tr>

{% for pool in disk_free.output.pools %}
  <tr><td> {{ pool.id }} </td>
      <td> {{ pool.name }} </td>
  <td> {{ pool.stats.kb_used }} </td></tr>
{% endfor %}

</table>
</center>
{% endblock %}
